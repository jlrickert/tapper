# Nodes index `dex/nodes.tsv`

This is the main [KEG](../5) [index](../6) that list all of the nodes.

- dex/nodes.tsv is the primary index used by the KEG utility to enumerate and look up nodes in the KEG instance.
- It provides a compact mapping from a numeric node id to basic metadata (most commonly an update timestamp and a human-friendly title/slug).

## Location

- Typically stored at dex/nodes.tsv in the repository layout shown in this project.

## Format

- Plain text, tab-separated values (TSV).
- Each line represents a single node with at least three columns:
  1. id — integer node identifier (unique)
  2. updated — timestamp in ISO 8601 (UTC) format, e.g., 2025-08-09 13:01:55Z
  3. title — human-readable title; may include a short slug/identifier in parentheses
- Example line:
  3<TAB>2025-08-09 17:44:04Z<TAB>Zeke AI utility (zeke)

## Field semantics

- id: stable numeric identifier used by keg commands (keg cat, keg edit, keg commit, etc.). Zero (0) is commonly used for a "zero node" or placeholder.
- updated: last-modified time for the node. KEG and consumers use this for sorting and freshness checks.
- title: textual label for display and quick identification. Parenthetical slugs (e.g., "(keg-index)") are a convenient short name for scripts or cross-references.

## Usage

- keg list and other KEG CLI commands read this file to show available nodes.
- keg cat <id> prints the node content referenced by the id from the index.
- Automated processes and docs (like zeke includes examples) reference nodes by id or slug for composition and linking.

## Maintenance guidance

- Update the updated timestamp whenever node content is changed.
- Append new node lines when creating nodes (or regenerate the index with keg index update if the project has an indexer).
- Keep ids unique. If the index is generated automatically, use the generator to avoid collisions.
- If you rely on slugs in parentheses, keep them concise and stable.

## Example (from this repository)

- Provided lines in dex/nodes.tsv map nodes used elsewhere in this repo:

  - 0 — placeholder: "Sorry, planned but not yet available"
  - 1 — "Configuration (config)"
  - 2 — "Keg configuration (keg-config)"
  - 3 — "Zeke AI utility (zeke)" — corresponds to docs/3/README.md
  - 4 — "LSP (lsp)"
  - 5 — "KEG utility (keg)" — corresponds to docs/5/README.md
  - 6 — "Keg index (keg-index)"

## Troubleshooting

- If a node is missing from listings, run: keg index update (or the repo's indexer) to rebuild dex/nodes.tsv.
- Verify timestamps are valid ISO 8601 UTC (ending with Z) to avoid sorting/parsing issues.
- If two entries share the same id, regenerate the index or fix the collision via the indexer.

## Best practices

- Prefer programmatic index updates (keg index update) rather than manual edits where possible.
- Include a stable slug in parentheses for scripts and cross-references.
- Keep the file simple: one node per line, three primary columns. Avoid adding free-form extra columns unless all consumers are updated to parse them.

## Summary

- dex/nodes.tsv is a small, authoritative index mapping node ids to timestamps and titles. It is central to KEG CLI operations and should be kept consistent, timestamped, and regenerated by the KEG index tool when structural changes occur.
